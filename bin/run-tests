#!/bin/bash

base="bundle exec rspec -f progress -f JUnit -o spec/ruby-agent-junit.xml"
specific_spec=$1

if [[ $specific_spec = '' ]]; then
  # run all unit tests
  $base
  # run each integration test in own process
  find spec/integration -name '*_spec.rb' -exec $base {} \;
else
  $base $1
fi
